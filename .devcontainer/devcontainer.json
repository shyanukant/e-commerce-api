{
  "name": "DevContainer",
  "dockerComposeFile": [
    "docker-compose.override.yml"
  ],
  "service": "e-commerce-api",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}", // Sets the default path VS Code opens

	"customizations": {
		"vscode": {
			// Add VS Code extensions you want installed in the container
			"extensions": [
				"ms-python.python", // Python extension
				"ms-python.vscode-pylance", // Pylance for better Python intellisense
				"ms-azuretools.vscode-docker", // Docker extension
				"mtxr.sqltools", // SQLTools for database interaction
				"mtxr.sqltools-driver-pg" // PostgreSQL driver for SQLTools
			]
		}
	},
  "forwardPorts": [8000, 5432, 6379],

  "postCreateCommand": "pip install --upgrade pip && pip install -r requirements.txt && python manage.py migrate"
 
  
} 

  "initializeCommand": "cd ${localWorkspaceFolder} && docker-compose up -d db redis",
  "postCreateCommand": "apt-get update && apt-get install -y postgresql-client && cd /e-commerce-api && pip install --upgrade pip && pip install psycopg2-binary && pip install -r requirements.txt && python -c 'import time; import socket; s = socket.socket(); time.sleep(5); s.connect((\"db\", 5432))' && python manage.py migrate || exit 1",
